{############# MACROs #############}
{% macro print_empty_cell(list) -%}
    <td class="{{ list| join(' ') }}"></td>
{%- endmacro %}

{% macro print_lesson(list, rowspan, title) -%}
    <td class="{{ list| join(' ') }}" rowspan="{{ rowspan }}"
{%- endmacro %}

{% macro print_day_headers() -%}
    {% for day in timetable.get_days() -%}
        <div class="row1 day-header">{{ day }}</div>
    {%- endfor %}
{%- endmacro %}

{#TODO We will use this macro later, when we will no more use 1:1 testing with old Candle.#}
{#{% macro print_lesson_title(lesson) -%}#}
{#    {{ lesson.room.name }}, {{ lesson.get_day_abbr() }} {{ lesson.get_start() }}-{{ lesson.get_end() }}#}
{#    {%- if lesson.subject.short_code -%}#}
{#    {{", " + lesson.subject.short_code }}#}
{#    {%- endif -%}#}
{#    {%- if lesson.teachers -%}#}
{#        {{ ":" }}#}
{#        {% for teacher in lesson.teachers -%}#}
{#            {{ teacher.short_name }}#}
{#            {%- if not loop.last -%}#}
{#                {{ ', ' }}#}
{#            {%- endif %}#}
{#        {%- endfor %}#}
{#    {%- endif -%}#}
{#{%- endmacro %}#}


{% macro print_lesson_title(lesson) -%}
    {{ lesson.room.name }}, {{ lesson.get_day_abbr() }} {{ lesson.get_start() }}-{{ lesson.get_end() }}, {{ lesson.subject.short_code }}:
    {% for teacher in lesson.teachers -%}
        {{ teacher.short_name }}
        {%- if not loop.last -%}
            {{ ', ' }}
        {%- endif %}
    {%- endfor %}
{%- endmacro %}


{% macro print_lesson_type(lesson) -%}
    {{ "lesson-type-" + lesson.type.code| upper()}}
{%- endmacro %}
{##################### (end of) MACROs ###################}



{% set ns = namespace() %}
{% set ns.layout = timetable.get_layout() %}

<div id="rozvrh">
    {# ##################### TODO nazov row1 by som zmenil na 'HEADERS'#}
    <div class="row1" id="timetable-corner"></div>
    {{ print_day_headers() }}
    {# ##################### TODO nazov row2 by som zmenil na 'COLUMNS'#}
    <div class="row2 times-column">
        {# Pre kazdy cas z pola starting_times: #}
        {% for time in timetable.get_starting_times() -%}
            <div class="start-time">{{ time }}</div>
        {%- endfor %}
    </div>
    {#   TODO columns: #}
    {#Pre kazdy den:#}
    {% for day in timetable.get_layout() -%}
        <div class="row2 day-column">
            {% for ordered_dict in day %}
{#                TODO#}
                {% for time in ordered_dict %}
                    {% include "timetable/timetable_cell.html" %}
                {% endfor %}

            {% endfor %}
        </div>
    {%- endfor %}
</div>